@startuml

title Make bucket in LR R2

participant "S3 Client" as client
box StorageSet1 (SS1) #LightGreen
participant "S3 Server/N1" as N1
participant "diskgroup-A/CL-1" as CL_1
participant "diskgroup-B/CR-1" as CR_1
participant "N2" as N2
participant "CL-2" as CL_2
participant "CR-2" as CR_2
participant "N3" as N3
participant "CL-3" as CL_3
participant "CR-3" as CR_3
end box
box StorageSet2 (SS2) #LightBlue
participant "N4" as N4
participant "CL-4" as CL_4
participant "CR-4" as CR_4
participant "N5" as N5
participant "CL-5" as CL_5
participant "CR-5" as CR_5
participant "N6" as N6
participant "CL-6" as CL_6
participant "CR-6" as CR_6
end box

autoactivate on

client -> N1: MB /bucket_name

N1 -> N1: get_accountID()

loop until all data is written
  value = bucket metadata JSON
  N1 -> N1: put_keyval(bucket_name,acctID,val)
  N1 -> N2: put_keyval(bucket_name,acctID,val)
  N1 -> N3: put_keyval(bucket_name,acctID,val)
  N1 -> N4: put_keyval(bucket_name,acctID,val)
  N1 -> N5: put_keyval(bucket_name,acctID,val)
  N1 -> N6: put_keyval(bucket_name,acctID,val)

  N5 --> N1: success
  N6 --> N1: success
  N4 --> N1: success
  N1 --> N1: success
  N2 --> N1: success
  N3 --> N1: success
end

N1 --> client: 200 OK

@enduml
